"use strict";var e=require("mapbox-gl"),o=require("./feature-54323509.js");require("axios"),require("date-fns");module.exports=class{_promoted;_popup;get id(){return"PromotionPopup"}initPromoted(e){this._promoted=e}sendAction(e,t){const i=o.TELEMETRY_ACTIONS[t];i&&o.sendAction(e,i)}show(t){if(!this._promoted)throw new Error("It needs to initPromoted.");this.remove();const i=o.formatProperties(t.properties),r=t.geometry.coordinates.slice(),s=`mapboxgl-popup-adid__${i.adid}`;document.querySelector(`.${s}`)||(this._promoted.fire(new o.Event(o.EVENT_TYPES.SHOW_POPUP,{feature:t})),this._popup=new e.Popup({closeOnClick:!1,closeButton:!1,className:s}).setLngLat(r).setHTML(`<div class="mapboxgl-popup-content-adid__${i.adid}" />`).addTo(this._promoted.map),showPromotionPopup&&showPromotionPopup(i,((e,i)=>{this._promoted&&(this._promoted.fire(new o.Event(o.EVENT_TYPES.CLICK_POPUP,{clickType:e,feature:t})),this.sendAction(i,e))}),(e=>{this._promoted&&(this._promoted.fire(new o.Event(o.EVENT_TYPES.CLOSE_POPUP,{feature:t})),this._promoted.deselectLayer(),this.remove(),o.sendDeselection(e))})),this._promoted.selectPin(t))}remove(){this._popup&&(this._popup.remove.bind(this),this._popup=void 0)}};
