import e from"http";import t from"https";import r from"url";import n from"stream";import o from"assert";import s from"zlib";const i={BASE_URL:"https://api.mapbox.com",TELEMETRY_URL:"https://events.mapbox.com",SOURCE_URL:"mapbox://mapbox-ads.bq09b9qc",LAYER_SOURCE_ID:"promoted-pins-8s73mu",ACCESS_TOKEN:"",MOBILE_MAX_WIDTH:768,DEBUG:!1};class a{type;data;constructor(e,t={}){this.type=e,this.data=t}}var c={exports:{}},u=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},f=u,h=Object.prototype.toString;function p(e){return"[object Array]"===h.call(e)}function d(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function m(e){if("[object Object]"!==h.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function g(e){return"[object Function]"===h.call(e)}function v(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),p(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var y={isArray:p,isArrayBuffer:function(e){return"[object ArrayBuffer]"===h.call(e)},isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:m,isUndefined:d,isDate:function(e){return"[object Date]"===h.call(e)},isFile:function(e){return"[object File]"===h.call(e)},isBlob:function(e){return"[object Blob]"===h.call(e)},isFunction:g,isStream:function(e){return l(e)&&g(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:v,merge:function e(){var t={};function r(r,n){m(t[n])&&m(r)?t[n]=e(t[n],r):m(r)?t[n]=e({},r):p(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)v(arguments[n],r);return t},extend:function(e,t,r){return v(t,(function(t,n){e[n]=r&&"function"==typeof t?f(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},_=y;function b(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var E=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(_.isURLSearchParams(t))n=t.toString();else{var o=[];_.forEach(t,(function(e,t){null!=e&&(_.isArray(e)?t+="[]":e=[e],_.forEach(e,(function(e){_.isDate(e)?e=e.toISOString():_.isObject(e)&&(e=JSON.stringify(e)),o.push(b(t)+"="+b(e))})))})),n=o.join("&")}if(n){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},w=y;function R(){this.handlers=[]}R.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},R.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},R.prototype.forEach=function(e){w.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var S=R,O=y,T=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},C=T,x=function(e,t,r,n,o){var s=new Error(e);return C(s,t,r,n,o)},A=x,L=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(A("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},B=y,D=B.isStandardBrowserEnv()?{write:function(e,t,r,n,o,s){var i=[];i.push(e+"="+encodeURIComponent(t)),B.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),B.isString(n)&&i.push("path="+n),B.isString(o)&&i.push("domain="+o),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},U=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},P=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},j=function(e,t){return e&&!U(t)?P(e,t):t},N=y,q=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],k=y,I=k.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=k.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0};function M(e){this.message=e}M.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},M.prototype.__CANCEL__=!0;var H,z=M,F=y,J=L,W=D,K=E,X=j,$=function(e){var t,r,n,o={};return e?(N.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=N.trim(e.substr(0,n)).toLowerCase(),r=N.trim(e.substr(n+1)),t){if(o[t]&&q.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o},Y=I,G=x,V=Xe,Q=z,Z=function(e){return new Promise((function(t,r){var n,o=e.data,s=e.headers,i=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}F.isFormData(o)&&delete s["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(u+":"+f)}var h=X(e.baseURL,e.url);function p(){if(c){var n="getAllResponseHeaders"in c?$(c.getAllResponseHeaders()):null,o={data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c};J((function(e){t(e),a()}),(function(e){r(e),a()}),o),c=null}}if(c.open(e.method.toUpperCase(),K(h,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=p:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(p)},c.onabort=function(){c&&(r(G("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){r(G("Network Error",e,null,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||V.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(G(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},F.isStandardBrowserEnv()){var d=(e.withCredentials||Y(h))&&e.xsrfCookieName?W.read(e.xsrfCookieName):void 0;d&&(s[e.xsrfHeaderName]=d)}"setRequestHeader"in c&&F.forEach(s,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete s[t]:c.setRequestHeader(t,e)})),F.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&"json"!==i&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(n=function(e){c&&(r(!e||e&&e.type?new Q("canceled"):e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),o||(o=null),c.send(o)}))},ee={exports:{}},te=r,re=te.URL,ne=e,oe=t,se=n.Writable,ie=o,ae=function(){if(!H){try{H=require("debug")("follow-redirects")}catch(e){}"function"!=typeof H&&(H=function(){})}H.apply(null,arguments)},ce=["abort","aborted","connect","error","socket","timeout"],ue=Object.create(null);ce.forEach((function(e){ue[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}}));var fe=_e("ERR_FR_REDIRECTION_FAILURE",""),he=_e("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),pe=_e("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),de=_e("ERR_STREAM_WRITE_AFTER_END","write after end");function le(e,t){se.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function me(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(n){var o=n+":",s=r[o]=e[n],i=t[n]=Object.create(s);Object.defineProperties(i,{request:{value:function(e,n,s){if("string"==typeof e){var i=e;try{e=ve(new re(i))}catch(t){e=te.parse(i)}}else re&&e instanceof re?e=ve(e):(s=n,n=e,e={protocol:o});return"function"==typeof n&&(s=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,ie.equal(n.protocol,o,"protocol mismatch"),ae("options",n),new le(n,s)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var n=i.request(e,t,r);return n.end(),n},configurable:!0,enumerable:!0,writable:!0}})})),t}function ge(){}function ve(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function ye(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r}function _e(e,t){function r(e){Error.captureStackTrace(this,this.constructor),this.message=e||t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function be(e){for(var t=0;t<ce.length;t++)e.removeListener(ce[t],ue[ce[t]]);e.on("error",ge),e.abort()}le.prototype=Object.create(se.prototype),le.prototype.abort=function(){be(this._currentRequest),this.emit("abort")},le.prototype.write=function(e,t,r){if(this._ending)throw new de;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new pe),this.abort()):r&&r()},le.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,(function(){n._ended=!0,o.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},le.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},le.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},le.prototype.setTimeout=function(e,t){var r=this;function n(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function o(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.emit("timeout"),s()}),e),n(t)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.once("response",s),this.once("error",s),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){le.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(le.prototype,e,{get:function(){return this._currentRequest[e]}})})),le.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},le.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);this._currentUrl=te.format(this._options),n._redirectable=this;for(var o=0;o<ce.length;o++)n.on(ce[o],ue[ce[o]]);if(this._isRedirect){var s=0,i=this,a=this._requestBodyBuffers;!function e(t){if(n===i._currentRequest)if(t)i.emit("error",t);else if(s<a.length){var r=a[s++];n.finished||n.write(r.data,r.encoding,e)}else i._ended&&n.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},le.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&!1!==this._options.followRedirects&&t>=300&&t<400){if(be(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new he);((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ye(/^content-/i,this._options.headers));var n=ye(/^host$/i,this._options.headers)||te.parse(this._currentUrl).hostname,o=te.resolve(this._currentUrl,r);ae("redirecting to",o),this._isRedirect=!0;var s=te.parse(o);if(Object.assign(this._options,s),s.hostname!==n&&ye(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var i={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,i)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){var a=new fe("Redirected request failed: "+e.message);a.cause=e,this.emit("error",a)}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]},ee.exports=me({http:ne,https:oe}),ee.exports.wrap=me;var Ee="0.23.0",we=y,Re=L,Se=j,Oe=E,Te=e,Ce=t,xe=ee.exports.http,Ae=ee.exports.https,Le=r,Be=s,De=Ee,Ue=x,Pe=T,je=Xe,Ne=z,qe=/https:?/;function ke(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var n=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+n}e.beforeRedirect=function(e){e.headers.host=e.host,ke(e,t,e.href)}}var Ie=function(e){return new Promise((function(t,r){var n;function o(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}var s=function(e){o(),t(e)},i=function(e){o(),r(e)},a=e.data,c=e.headers,u={};if(Object.keys(c).forEach((function(e){u[e.toLowerCase()]=e})),"user-agent"in u?c[u["user-agent"]]||delete c[u["user-agent"]]:c["User-Agent"]="axios/"+De,a&&!we.isStream(a)){if(Buffer.isBuffer(a));else if(we.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else{if(!we.isString(a))return i(Ue("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));a=Buffer.from(a,"utf-8")}u["content-length"]||(c["Content-Length"]=a.length)}var f=void 0;e.auth&&(f=(e.auth.username||"")+":"+(e.auth.password||""));var h=Se(e.baseURL,e.url),p=Le.parse(h),d=p.protocol||"http:";if(!f&&p.auth){var l=p.auth.split(":");f=(l[0]||"")+":"+(l[1]||"")}f&&u.authorization&&delete c[u.authorization];var m=qe.test(d),g=m?e.httpsAgent:e.httpAgent,v={path:Oe(p.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:g,agents:{http:e.httpAgent,https:e.httpsAgent},auth:f};e.socketPath?v.socketPath=e.socketPath:(v.hostname=p.hostname,v.port=p.port);var y,_=e.proxy;if(!_&&!1!==_){var b=d.slice(0,-1)+"_proxy",E=process.env[b]||process.env[b.toUpperCase()];if(E){var w=Le.parse(E),R=process.env.no_proxy||process.env.NO_PROXY,S=!0;if(R)S=!R.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||("."===e[0]&&p.hostname.substr(p.hostname.length-e.length)===e||p.hostname===e))}));if(S&&(_={host:w.hostname,port:w.port,protocol:w.protocol},w.auth)){var O=w.auth.split(":");_.auth={username:O[0],password:O[1]}}}}_&&(v.headers.host=p.hostname+(p.port?":"+p.port:""),ke(v,_,d+"//"+p.hostname+(p.port?":"+p.port:"")+v.path));var T=m&&(!_||qe.test(_.protocol));e.transport?y=e.transport:0===e.maxRedirects?y=T?Ce:Te:(e.maxRedirects&&(v.maxRedirects=e.maxRedirects),y=T?Ae:xe),e.maxBodyLength>-1&&(v.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(v.insecureHTTPParser=e.insecureHTTPParser);var C=y.request(v,(function(t){if(!C.aborted){var r=t,n=t.req||C;if(204!==t.statusCode&&"HEAD"!==n.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(Be.createUnzip()),delete t.headers["content-encoding"]}var o={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:n};if("stream"===e.responseType)o.data=r,Re(s,i,o);else{var a=[],c=0;r.on("data",(function(t){a.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(r.destroy(),i(Ue("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,n)))})),r.on("error",(function(t){C.aborted||i(Pe(t,e,null,n))})),r.on("end",(function(){var t=Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=we.stripBOM(t))),o.data=t,Re(s,i,o)}))}}}));if(C.on("error",(function(t){C.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||i(Pe(t,e,null,C))})),e.timeout){var x=parseInt(e.timeout,10);if(isNaN(x))return void i(Ue("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",C));C.setTimeout(x,(function(){C.abort();var t=e.transitional||je.transitional;i(Ue("timeout of "+x+"ms exceeded",e,t.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C))}))}(e.cancelToken||e.signal)&&(n=function(e){C.aborted||(C.abort(),i(!e||e&&e.type?new Ne("canceled"):e))},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),we.isStream(a)?a.on("error",(function(t){i(Pe(t,e,null,C))})).pipe(C):C.end(a)}))},Me=y,He=function(e,t){O.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},ze=T,Fe={"Content-Type":"application/x-www-form-urlencoded"};function Je(e,t){!Me.isUndefined(e)&&Me.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var We,Ke={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?We=Z:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(We=Ie),We),transformRequest:[function(e,t){return He(t,"Accept"),He(t,"Content-Type"),Me.isFormData(e)||Me.isArrayBuffer(e)||Me.isBuffer(e)||Me.isStream(e)||Me.isFile(e)||Me.isBlob(e)?e:Me.isArrayBufferView(e)?e.buffer:Me.isURLSearchParams(e)?(Je(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Me.isObject(e)||t&&"application/json"===t["Content-Type"]?(Je(t,"application/json"),function(e,t,r){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Ke.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||n&&Me.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw ze(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Me.forEach(["delete","get","head"],(function(e){Ke.headers[e]={}})),Me.forEach(["post","put","patch"],(function(e){Ke.headers[e]=Me.merge(Fe)}));var Xe=Ke,$e=y,Ye=Xe,Ge=function(e){return!(!e||!e.__CANCEL__)},Ve=y,Qe=function(e,t,r){var n=this||Ye;return $e.forEach(r,(function(r){e=r.call(n,e,t)})),e},Ze=Ge,et=Xe,tt=z;function rt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tt("canceled")}var nt=y,ot=function(e,t){t=t||{};var r={};function n(e,t){return nt.isPlainObject(e)&&nt.isPlainObject(t)?nt.merge(e,t):nt.isPlainObject(t)?nt.merge({},t):nt.isArray(t)?t.slice():t}function o(r){return nt.isUndefined(t[r])?nt.isUndefined(e[r])?void 0:n(void 0,e[r]):n(e[r],t[r])}function s(e){if(!nt.isUndefined(t[e]))return n(void 0,t[e])}function i(r){return nt.isUndefined(t[r])?nt.isUndefined(e[r])?void 0:n(void 0,e[r]):n(void 0,t[r])}function a(r){return r in t?n(e[r],t[r]):r in e?n(void 0,e[r]):void 0}var c={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a};return nt.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,n=t(e);nt.isUndefined(n)&&t!==a||(r[e]=n)})),r},st=Ee,it={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){it[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var at={};it.transitional=function(e,t,r){function n(e,t){return"[Axios v"+st+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,s){if(!1===e)throw new Error(n(o," has been removed"+(t?" in "+t:"")));return t&&!at[o]&&(at[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,s)}};var ct={assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var s=n[o],i=t[s];if(i){var a=e[s],c=void 0===a||i(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+s)}},validators:it},ut=y,ft=E,ht=S,pt=function(e){return rt(e),e.headers=e.headers||{},e.data=Qe.call(e,e.data,e.headers,e.transformRequest),e.headers=Ve.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ve.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||et.adapter)(e).then((function(t){return rt(e),t.data=Qe.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Ze(t)||(rt(e),t&&t.response&&(t.response.data=Qe.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},dt=ot,lt=ct,mt=lt.validators;function gt(e){this.defaults=e,this.interceptors={request:new ht,response:new ht}}gt.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=dt(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&lt.assertOptions(t,{silentJSONParsing:mt.transitional(mt.boolean),forcedJSONParsing:mt.transitional(mt.boolean),clarifyTimeoutError:mt.transitional(mt.boolean)},!1);var r=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var o,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!n){var i=[pt,void 0];for(Array.prototype.unshift.apply(i,r),i=i.concat(s),o=Promise.resolve(e);i.length;)o=o.then(i.shift(),i.shift());return o}for(var a=e;r.length;){var c=r.shift(),u=r.shift();try{a=c(a)}catch(e){u(e);break}}try{o=pt(a)}catch(e){return Promise.reject(e)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},gt.prototype.getUri=function(e){return e=dt(this.defaults,e),ft(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ut.forEach(["delete","get","head","options"],(function(e){gt.prototype[e]=function(t,r){return this.request(dt(r||{},{method:e,url:t,data:(r||{}).data}))}})),ut.forEach(["post","put","patch"],(function(e){gt.prototype[e]=function(t,r,n){return this.request(dt(n||{},{method:e,url:t,data:r}))}}));var vt=gt,yt=z;function _t(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new yt(e),t(r.reason))}))}_t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},_t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},_t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},_t.source=function(){var e;return{token:new _t((function(t){e=t})),cancel:e}};var bt=_t,Et=y,wt=u,Rt=vt,St=ot;var Ot=function e(t){var r=new Rt(t),n=wt(Rt.prototype.request,r);return Et.extend(n,Rt.prototype,r),Et.extend(n,r),n.create=function(r){return e(St(t,r))},n}(Xe);Ot.Axios=Rt,Ot.Cancel=z,Ot.CancelToken=bt,Ot.isCancel=Ge,Ot.VERSION=Ee,Ot.all=function(e){return Promise.all(e)},Ot.spread=function(e){return function(t){return e.apply(null,t)}},Ot.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},c.exports=Ot,c.exports.default=Ot;var Tt=c.exports;function Ct(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function xt(e){Ct(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function At(e,t){return Ct(2,arguments),xt(e).getTime()-xt(t).getTime()}var Lt={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function Bt(e){return e?Lt[e]:Lt.trunc}const Dt=(e=8)=>Math.random().toString(e).substring(2),Ut="Call",Pt="Navigation",jt="Detail",Nt="BannerDetail";let qt=new Date,kt=Dt();const It=async()=>{(!qt||function(e,t,r){Ct(2,arguments);var n=At(e,t)/1e3;return Bt(null==r?void 0:r.roundingMethod)(n)}(new Date,qt)>60)&&(qt=new Date,kt=Dt(),await Ht())};function Mt(e){if(!i.DEBUG)return new Promise(((t,r)=>{const n=`/events/v2?access_token=${i.ACCESS_TOKEN}`;return((e={})=>{const{baseURL:t,isBlob:r}=e;return Tt.create({baseURL:t||i.BASE_URL,headers:{"Content-Type":"application/json"},timeout:3e4,responseType:r?"blob":"json"})})({baseURL:i.TELEMETRY_URL,isBlob:!0}).post(n,e).then((e=>{t(e.data)})).catch((e=>{console.error(e),r(e)}))}))}async function Ht(){return Mt([{sessionIdentifier:kt,event:"adMetrics.sessionStart",bucket:"undefined",created:(new Date).toISOString()}])}async function zt(e,t){const r={sessionIdentifier:kt,event:"adMetrics.select",adid:e,zoomLevel:t,created:(new Date).toISOString()};return await It(),Mt([r])}async function Ft(e){const t={sessionIdentifier:kt,event:"adMetrics.deselect",adid:e,created:(new Date).toISOString()};return await It(),Mt([t])}async function Jt(e){const t=e.map((({adid:e,visibleStartTime:t,visibleEndTime:r})=>({sessionIdentifier:kt,event:"adMetrics.visible",adid:e,visibleStartTime:t,visibleEndTime:r,created:(new Date).toISOString()})));return await It(),Mt(t)}async function Wt(e,t){const r={sessionIdentifier:kt,event:"adMetrics.callToAction",adid:e,action:t,created:(new Date).toISOString()};return await It(),Mt([r])}const Kt={LOAD:"load",MOVE:"move",CLICK_PIN:"click_pin",CLICK_CARD:"click_card",SHOW_CARD:"show_card",UPDATE_CARD:"update_card",CLOSE_CARD:"close_card",CLICK_SIDE_CARD:"click_side_card",SHOW_SIDE_CARD:"show_side_card",UPDATE_SIDE_CARD:"update_side_card",OPEN_SIDE_CARD:"open_side_card",HIDE_SIDE_CARD:"hide_side_card",CLOSE_SIDE_CARD:"close_side_card",CLICK_POPUP:"click_popup",SHOW_POPUP:"show_popup",CLOSE_POPUP:"close_popup"},Xt={["banner"]:Nt,["phone"]:Ut,["directions"]:Pt,["detail"]:jt},$t=e=>(e=>{const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r.replace(/(\_\w)/g,(e=>e[1].toUpperCase()))]=e[r]);return t})(e);export{a as E,Xt as T,Kt as a,zt as b,i as c,Jt as d,Wt as e,$t as f,Ft as g,Ht as s};
