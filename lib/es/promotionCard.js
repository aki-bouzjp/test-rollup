import{e as o,f as r,E as t,a as e,g as i,T as a}from"./feature-f06192da.js";import{u as s,i as d,r as m}from"./browser-0ec08580.js";import"http";import"https";import"url";import"stream";import"assert";import"zlib";class p{_promoted;get id(){return"PromotionCard"}initPromoted(o){this._promoted=o}sendAction(r,t){const e=a[t];e&&o(r,e)}show(o){if(!this._promoted)throw new Error("It needs to initPromoted.");const a=r(o.properties),m=document.querySelector(".mapboxgl-card"),p=`mapboxgl-card-adid__${o.properties.adid}`,n=document.querySelector(`.${p}`);if(!m||!n){if(m&&!n&&updatePromotionCard)return this._promoted.fire(new t(e.UPDATE_CARD,{feature:o})),s(".mapboxgl-card",`mapboxgl-card ${p}`),void updatePromotionCard(a);this._promoted.fire(new t(e.SHOW_CARD,{feature:o})),d(`mapboxgl-card ${p}`),showPromotionCard&&showPromotionCard(a,((r,i)=>{this._promoted&&(this._promoted.fire(new t(e.CLICK_CARD,{clickType:r,feature:o})),this.sendAction(i,r))}),(r=>{this._promoted&&(this._promoted.fire(new t(e.CLOSE_CARD,{feature:o})),this._promoted.deselectLayer(),this.remove(),i(r))}))}}remove(){m(".mapboxgl-card")}}export{p as default};
